<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: vps | Keen on Art of Tech]]></title>
  <link href="http://tinyxd.me/blog/categories/vps/atom.xml" rel="self"/>
  <link href="http://tinyxd.me/"/>
  <updated>2012-08-26T00:32:28+08:00</updated>
  <id>http://tinyxd.me/</id>
  <author>
    <name><![CDATA[Tiny]]></name>
    <email><![CDATA[admin@tinyxd.me]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[图床管理]]></title>
    <link href="http://tinyxd.me/blog/2012/08/26/imag-file-explorer/"/>
    <updated>2012-08-26T00:08:00+08:00</updated>
    <id>http://tinyxd.me/blog/2012/08/26/imag-file-explorer</id>
    <content type="html"><![CDATA[<p>做网站，尤其是做多个网站的，文件的统一管理，备份是很重要的。本站用<a href="http://encode-explorer.siineiolekala.net/">Encode Explorer</a>来管理本站图片、上传附件等。 <br/>
去Encode Explorer在sourceforge的<a href="http://sourceforge.net/projects/encode-explorer/files/encode-explorer/">项目官网</a>下载程序，其代码不过3k多行。只要将index.php上传到网站根目录，然后把nginx设置好用<a href="http://upload.tinyxd.me/">2级域名</a>指向此根目录，就可以了。    <br/>
其中index.php需要改几个地方：   <br/>
1.<code>$_CONFIG['lang'] = "zh_CN";</code> 支持中文  <br/>
2.<code>$_CONFIG['users'] = array(array('username', 'password', 'admin'));</code>  建立admin用户   <br/>
其中index.php介绍比较详细了。语法格式：array(username, password, status)    status为user可以查看目录但不可以修改，admin能够上传文件和删除文件。   <br/>
3.<code>$_CONFIG['new_dir_mode'] = 0755;</code>     <br/>
<code>$_CONFIG['upload_file_mode'] = 0644;</code> <br/>
修改新建文件夹和上传文件的默认权限。    <br/>
这就是最终完成的，用二级域名（只要将该域名dns解析到vps服务器地址就可以了）<a href="http://upload.tinyxd.me/">http://upload.tinyxd.me/</a>来上传/浏览/删除文件。  <br/>
本文参考了<a href="http://log4d.com/">log4d</a>的<a href="http://log4d.com/2012/05/image-host/">使用独立图床子域名</a>。</p>

<br />


<p>本文地址：<a href="http://tinyxd.me/2012/08/26/imag-file-explorer/">http://tinyxd.me/2012/08/26/imag-file-explorer/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vps lnmp配置优化]]></title>
    <link href="http://tinyxd.me/blog/2012/08/25/vps-optimization/"/>
    <updated>2012-08-25T23:40:00+08:00</updated>
    <id>http://tinyxd.me/blog/2012/08/25/vps-optimization</id>
    <content type="html"><![CDATA[<p>我选用了lnmp（linux + Nginx + PHP + MySQL ）来安装，方便快捷，安装后发现其实好多已经优化好了。  <br/>
其中需要注意到的有以下几个： <br/>
一. 基于xen架构的可以增加swap分区大小
我的vps是openVZ的，swap分区是不能随意更改的。PS.主机商已经提供了128M的swap了。满足了！ <br/>
<code>
cd /var/
dd if=/dev/zero of=swapfile bs=1024 count=262144
/sbin/mkswap swapfile
/sbin/swapon swapfile
</code>
然后让自己做的swap分区在系统启动时自动加载：</p>

<pre><code>vi /etc/fstab   
</code></pre>

<p>在适当位置添加以下内容：</p>

<pre><code>/var/swapfile swap swap defaults 0 0
</code></pre>

<!--more-->


<p>二.Nginx主配置文件（nginx.conf）的优化
Nginx每个进程耗费10M~12M内存，只开启一个Nginx进程，节省内存。</p>

<pre><code>worker_processes 1;   
</code></pre>

<p>对网页文件、CSS、JS、XML等启动gzip压缩，减少数据传输量，提高访问速度。</p>

<pre><code>gzip on;
gzip_min_length  1k;
gzip_buffers     4 16k;
gzip_http_version 1.0;
gzip_comp_level 2;
gzip_types       text/plain application/x-javascript text/css application/xml;
gzip_vary on;
</code></pre>

<p>还有：</p>

<pre><code>location ~ .*\.(php|php5)?$
   {
     #将Nginx与FastCGI的通信方式由TCP改为Unix Socket。TCP在高并发访问下比Unix Socket稳定，但Unix Socket速度要比TCP快。
     fastcgi_pass  unix:/tmp/php-cgi.sock;
     #fastcgi_pass  127.0.0.1:9000;
     fastcgi_index index.php;
     include fcgi.conf;
   }

   location ~ /read.php
   {
     #将Nginx与FastCGI的通信方式由TCP改为Unix Socket。TCP在高并发访问下比Unix Socket稳定，但Unix Socket速度要比TCP快。
     fastcgi_pass  unix:/tmp/php-cgi.sock;
     #fastcgi_pass  127.0.0.1:9000;
     fastcgi_index index.php;
     include fcgi.conf;
   }

   #博客的图片较多，更改较少，将它们在浏览器本地缓存15天，可以提高下次打开我博客的页面加载速度。
   location ~ .*\.(gif|jpg|jpeg|png|bmp|swf)$
   {
     expires      15d;
   } 

   #博客会加载很多JavaScript、CSS，将它们在浏览器本地缓存1天，访问者在看完一篇文章或一页后，再看另一篇文件或另一页的内容，无需从服务器再次下载相同的JavaScript、CSS，提高了页面显示速度。
   location ~ .*\.(js|css)?$
   {
     expires      1d;
   }   
</code></pre>

<p>其实上面说的lnmp自动安装包已经做好了这些优化！ <br/>
包括后面<a href="http://blog.s135.com/post/375/2/1/">这篇文章</a>提到的，lnmp已经配置好了。</p>

<br />


<p>对于新手的忠告，将配置改好后，记得reload，或者restart。 <br/>
经过优化后的vps，有人做过测试一小时，1000+的pv量都是没有问题的。相同的价格可见买vps还是比较合算的。 <br/>
PS.我的vps现在放了两个站：<a href="http://tinyxd.me/">本站</a>、<a href="http://info.tinyxd.me/">冰之竹语</a>。后期准备再弄个技术bbs之类的玩玩。 <br/>
对了我还放了个文件管理器<a href="http://encode-explorer.siineiolekala.net/">Encode Explorer</a>，专门用来存放上传的图片和文件的。地址在<a href="http://upload.tinyxd.me/">这里</a>。其实这一招是从<a href="http://log4d.com/2012/05/image-host/">这里</a>学来的。。。
我将在我的下一篇<a href="http://tinyxd.me/2012/08/25/imag-file-explorer/">文章</a>中详细说明。</p>

<br />


<p>本文地址：<a href="http://tinyxd.me/2012/08/25/vps-optimization/">http://tinyxd.me/2012/08/25/vps-optimization/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VPS申请及博客搭建]]></title>
    <link href="http://tinyxd.me/blog/2012/08/14/vps-lnmp-setup-and-typecho-blog/"/>
    <updated>2012-08-14T00:33:00+08:00</updated>
    <id>http://tinyxd.me/blog/2012/08/14/vps-lnmp-setup-and-typecho-blog</id>
    <content type="html"><![CDATA[<p>前些天，在网上溜达时，突然看到一款免费的vps。不错。。。免费的。。。哥当时是激动啊，对于像我这样的屌丝，有免费的当然不会放过的。 <br/>
于是乎哥就开始折腾了。 <br/>
一、Vps申请 <br/>
Vps是host1free提供的（128MB,10G,无限流量），申请地址：<a href="http://www.host1free.com/free-vps/">http://www.host1free.com/free-vps/</a> ，看网上说，这已经是第三次开放注册了，一共2万个。最好翻墙注册，注册时最好用Gmail邮箱，不要用qq邮箱，然后就是耐心的等待了。建议大家，真心做正规站的来申请，做采集站的（包括采集类影视、小说、淘客及黑客、成人等违反TOS和中美法律内容）绕道吧。这个免费的vps对于想学习vps搭建博客的人实属不易。 <br/>
二、 安装lnmp</p>

<!--more-->


<p>参考<a href="http://lnmp.org/install.html">LNMP一键安装包</a>，其中会用到putty工具，可以到<a href="http://dl.pconline.com.cn/html_2/1/97/id=3978&amp;pn=0.html">这里</a>下载。 <br/>
按照上面的步骤进行操作。需要说明的是 <br/>
1. 第一条命令<code>screen –S lnmp</code>很重要，当网络突然掉线或者不小心putty被关掉时候，可以用<code>screen –r lnmp</code>看到之前lnmp所进行到的情况。对于没有screen的可以按照<a href="http://www.vpser.net/manage/run-screen-lnmp.html">这里</a>进行安装。 <br/>
2. 当需要将二级域名绑定到此空间时，我所用的博客工具是typecho，当添加了虚拟主机后，进入后台出现404错误，一般出现这样的情况是nginx设置伪静态的问题，这个情况lnmp已经帮我们解决了。但是，我的仍然出现了404问题，最后把<code>/usr/local/nginx/conf/nginx.conf</code>里面的server_name 和所绑定的域名重名了。只要随便改个名字就好了。  <br/>
三、 安装typecho  <br/>
安装过程，<a href="http://docs.typecho.org/install">官方文档</a>已经说的够详细了，这里就不再多说了。 <br/>
四、 数据库的备份问题  <br/>
数据备份，这个始终是个大问题。可以到<a href="http://www.vpser.net/vps-howto">这里</a>参考，也可以使用rsync来同步备份。 <br/>
五、关于新建站点  <br/>
至于这个新建的站点，其实想法还没有成熟，只是想分享一些互联网，linux方面的资讯，还有一些搞笑的轻松的话题。地址是：<a href="http://info.tinyxd.me">http://info.tinyxd.me</a>  <br/>
ps：博客还没有取名，希望大家给点建议。</p>

<br />


<p>关于vps，lnmp比较好的文章：  <br/>
<a href="http://www.cnblogs.com/amityat/archive/2011/08/23/2150177.html">LNMP一键安装升级nginx及php常用设置 SFTP管理指南</a> <br/>
<a href="http://www.vpser.net/vps-howto">VPS新手指南/教程</a></p>

<br />


<p>本站博客未特别注明，均为原创，转载请注明出处。 <br/>
本文地址：<a href="http://tinyxd.me/blog/2012/08/14/vps-lnmp-setup-and-typecho-blog/">http://tinyxd.me/blog/2012/08/14/vps-lnmp-setup-and-typecho-blog/</a></p>
]]></content>
  </entry>
  
</feed>
